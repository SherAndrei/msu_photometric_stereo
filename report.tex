\documentclass[12pt]{article}

%Russian-specific packages
%--------------------------------------
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english, russian]{babel}
%for search in russian
\usepackage{cmap}
% for markdown style quotes
\usepackage{csquotes}
%--------------------------------------

%Math-specific packages
%--------------------------------------
\usepackage{amsmath}
\usepackage{amssymb}

\def\d{ \mathrm{d} }
\def\norm{ \mathrm{n} }

\usepackage{amsthm}
\newtheorem{lemma}{Лемма}
\newtheorem{definition}{Определение}
\newtheorem*{remark}{Замечание}

%Format-specific packages
%--------------------------------------
\usepackage[left=2cm,
            right=2cm,
            top=1cm,
            bottom=2cm,
            bindingoffset=0cm]{geometry}

%Graphics packages
%--------------------------------------
\usepackage{graphicx}
\usepackage{wrapfig}

\graphicspath{ { ./tex/ } }

\includeonly{
  tex/title
  , tex/introduction
  , tex/radiometry
  , tex/surfaces
}

\usepackage{tikz}
\usetikzlibrary{
  shapes.geometric
  , intersections
  , calc
  % for angles
  , angles
  , quotes
  , babel
  % ------
 , external
 , arrows.meta
 , patterns
}
\tikzexternalize[prefix=tex/]

\tikzset{
  lighter/.pic={
    code={
      \node[
        draw=black
        , fill=yellow
        , rectangle
        , minimum width=1cm
        , minimum height=0.3cm
      ] (-body) at (0,0) {};

      \filldraw [fill=yellow]
      (-body.north east)
      -- ([shift={(0.3,0.2)}]-body.north east) coordinate (headUpper)
      -- ([shift={(0.3,-0.2)}]-body.south east) coordinate (headLower)
      -- (-body.south east);
      \path ($ (headUpper)!.5!(headLower) $) coordinate (-head);
  }},
  camera/.pic={
    code={
      \node[
        draw=black
        , fill=gray
        , rectangle
        , minimum width=1cm
        , minimum height=0.2cm
      ] (-body) at (0,0) {};

      \filldraw [fill=gray]
      let \n1={0.15} in
      ($ (-body.north east)!.5!(-body.north) $)
      -- ([shift={(0,\n1)}]-body.north east) coordinate (headUpper)
      -- ([shift={(0,\n1)}]-body.north west) coordinate (headLower)
      -- ($ (-body.north)!.5!(-body.north west) $);
      \path ($ (headUpper)!.5!(headLower) $) coordinate (-head);
    }
  }
}

\begin{document}

\include{tex/title}

\newpage
\tableofcontents

\newpage

\include{tex/introduction}

\newpage

\include{tex/radiometry}

\newpage

\include{tex/surfaces}

\newpage

\section{Photometric stereo}

% Photometric stereo -- способ восстановить трехмерную форму объекта
% используя 

\subsection{Постановка задачи}

% \begin{figure}[h]
%   \begin{center}
%     \begin{tikzpicture}
%       \tikzstyle{lighter body}=[
%       draw=black
%       , fill=yellow
%       , rectangle
%       , minimum width=1cm
%       , minimum height=0.5cm
%       ];
%       \tikzset{lighter head/.code={

%       }};
%       \node [lighter body, rotate=50] (SndrRect) at (-5, 4){};
%       \filldraw[fill=yellow] let
%       \p1=($ (SndrRect.north west) - (SndrRect.north east) $),
%       \n2={0.3}
%       in
%       ($ (SndrRect.north east)!.5!(SndrRect.north) $) coordinate (SndrA) --
%       ($ (SndrRect.north)!.5!(SndrRect.north west) $) coordinate (SndrB) --
%       ([shift={(\y1*\n2,-\x1*\n2)}]SndrRect.north west) coordinate (SndrC) --
%       ([shift={(\y1*\n2,-\x1*\n2)}]SndrRect.north east) coordinate (SndrD) -- cycle
%       ;

%       \node [draw,
%         fill=\SndrColor,
%         rectangle,
%         minimum width=1cm,
%         minimum height=0.5cm,
%         rotate=\SndrAngle,
%       ] (SndrRect) at (-5, 4){};
%       \filldraw[fill=\SndrColor] let
%       \p1=($ (SndrRect.north west) - (SndrRect.north east) $),
%       \n2={0.3}
%       in
%       ($ (SndrRect.north east)!.5!(SndrRect.north) $) coordinate (SndrA) --
%       ($ (SndrRect.north)!.5!(SndrRect.north west) $) coordinate (SndrB) --
%       ([shift={(\y1*\n2,-\x1*\n2)}]SndrRect.north west) coordinate (SndrC) --
%       ([shift={(\y1*\n2,-\x1*\n2)}]SndrRect.north east) coordinate (SndrD) -- cycle
%       ;

%       \def\RcvrColor {gray};
%       \node [draw,
%         fill=\RcvrColor,
%         rectangle,
%         minimum width=1cm,
%         minimum height=0.5cm,
%         rotate=180,
%       ] (RcvrRect) at (0, 5){};
%       \filldraw[fill=\RcvrColor] let
%       \p1=($ (RcvrRect.north west) - (RcvrRect.north east) $),
%       \n2={0.3}
%       in
%       ($ (RcvrRect.north east)!.5!(RcvrRect.north) $) coordinate (RcvrA)
%       -- ($ (RcvrRect.north)!.5!(RcvrRect.north west) $) coordinate (RcvrB)
%       -- ([shift={(\y1*\n2,-\x1*\n2)}]RcvrRect.north west) coordinate (RcvrC)
%       -- ([shift={(\y1*\n2,-\x1*\n2)}]RcvrRect.north east) coordinate (RcvrD)
%       -- cycle
%       ;

%       \node [draw,
%         trapezium,
%         shade,
%         minimum width=3cm,
%         trapezium left angle=120,
%         trapezium right angle=60] (Srfc) at (0, 0){};

%       \draw[dashed,color=\SndrColor,line width=0.5mm]
%       ($ (SndrC)!.5!(SndrD) $) coordinate (beginSnd)
%       -- (Srfc.center) coordinate (endSnd);

%       \draw[dashed,color=\RcvrColor,line width=0.5mm]
%       (Srfc.center) coordinate (beginRcv)
%       -- ($ (RcvrC)!.5!(RcvrD) $) coordinate (endRcv);

%     \end{tikzpicture}
%     \caption{Отражение поверхности}
%     \label{problem}
%   \end{center}
% \end{figure}

\subsection{Восстановление нормалей}
\subsection{Восстановление поверхности из нормалей}
\subsection{Проблемы, возможные решения}

\section{Литература}
\begin{enumerate}
  \item Гуревич М. М. Фотометрия. Теория, методы и приборы. — 2-е изд. — Л.: Энергоатомиздат. Ленинградское отделение, 1983. — С. 23—24. — 272 с.
  \item Ying Wu. "Radiometry, BRDF and Photometric Stereo". Northwestern University. Retrieved 2015-03-25.
  \item A. V. Arecchi, T. Messadi, and R. J. Koshel, Field Guide to Illumination, SPIE Press, Bellingham, WA (2007)
  \item Woodham, R.J. 1980. Photometric method for determining surface orientation from multiple images. Optical Engineerings 19, I, 139-144.
\end{enumerate}
\end{document}
